import{x as Ho,y as Uo,z as Go,D as Ko,r as i,I as $o,J as On,j as n,K as W,M as Xo,s as N,F as z,N as Yo,O as De,Q as we,U as ke,V as nt,v as Oe,W as V,X as qo,f as x,u as Jo,Y as Zo,Z as Ln,$ as An,a0 as Le,a1 as Qo,a2 as ea,a3 as Ce,a4 as ee,a5 as ot,a6 as ta,a7 as na,a8 as oa,a9 as aa,aa as sa,ab as xe,ac as jn,ad as zn,ae as ia,af as ut,t as pt,ag as de,ah as ra,ai as ca,aj as Vt,ak as la,al as da,am as ua,A as te,an as Bn,B as T,i as R,b as ue,S as X,ao as ht,ap as mt,aq as Nn,ar as pa,d as q,as as ha,at as Ie,au as ft,e as G,av as Wn,aw as _e,ax as ma,R as fe,ay as Ae,az as fa,aA as Vn,aB as ga,aC as ba,aD as va,aE as Ee,aF as ya,aG as ne,h as be,aH as Pa,aI as je,aJ as Sa,aK as Fn,aL as xa,aM as _a,aN as wa,aO as Hn,aP as Ca,aQ as gt,aR as Ft,aS as Ia,aT as bt,aU as Ea,aV as at,aW as Un,aX as ze,aY as Ta,aZ as ka,a_ as Ra,a$ as Ma,b0 as Da,b1 as Oa,b2 as La,b3 as Aa,b4 as ja,b5 as se,b6 as ie,m as ve,b7 as Gn,b8 as Be,b9 as za,ba as vt,bb as yt,bc as Ba,bd as Na,be as Wa,bf as Va,bg as Fa,bh as Kn,bi as $n,bj as Ha,bk as Ua,bl as Ga,bm as oe,bn as Xn,bo as Ka,bp as Yn,bq as st,br as $a,bs as Xa,bt as Ya,bu as qn,bv as qa,bw as Ja,bx as Za,H as Jn,by as Qa,P as es,bz as Zn,bA as Pt,bB as ts,bC as Ze,bD as ns,bE as os,bF as as,bG as Ht,bH as ss,bI as Qn,bJ as Qe,bK as is,L as Ut,C as it,bL as eo,bM as rs,bN as cs,bO as ls,bP as ds,bQ as us,bR as ps,bS as to,bT as hs,bU as St,bV as ms,bW as fs,bX as gs,bY as bs,bZ as vs,b_ as ys,b$ as Ps,c0 as Ss,c1 as xs,c2 as _s,c3 as rt,E as ws,c4 as Cs,c5 as Is,c6 as Es,c7 as Ts,c8 as ct,c9 as ks,ca as Rs,cb as Ms,cc as Gt,T as Ds,cd as Os,ce as no,G as Ls,cf as As,cg as js,ch as zs,ci as Bs,cj as et,ck as Kt,cl as Ns,cm as $t,cn as Ws}from"./sanity-fb6781c5.js";import{h as Vs,j as Fs}from"./json-inspector-5dc76863.js";function oo(t,e){var o=typeof e=="object";return new Promise(function(s,a){var l=new Ho({next:function(r){s(r),l.unsubscribe()},error:a,complete:function(){o?s(e.defaultValue):a(new Uo)}});t.subscribe(l)})}function Hs(){return Go(function(t,e){var o,s=!1;t.subscribe(Ko(e,function(a){var l=o;o=a,s&&e.next([l,a]),s=!0}))})}function Us(t,e){var o=i.useCallback(function(){var r=new $o(t),c=r.asObservable().pipe(On());return[e?c.pipe(e):c,r]},[]),s=i.useRef();s.current||(s.current=o());var a=s.current[0];i.useEffect(function(){if(s.current){var r=s.current,c=r[1];c.next(t)}},[t,s]);var l=i.useRef(!1);return i.useEffect(function(){return l.current&&(s.current||(s.current=o()),l.current=!1),function(){if(s.current){l.current=!0;var r=s.current,c=r[1];c.complete(),s.current=void 0}}},[]),a}var Xt,Yt,qt,Jt,Zt,Qt,en,tn,nn,on,an,sn,rn,cn,ln,dn,un,pn,hn,mn,fn,gn,bn,vn,yn,Pn,Sn,xn;function j(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function xt(t){let{children:e,ms:o=0}=t;const[s,a]=i.useState(o<=0);return i.useEffect(()=>{if(o<=0)return;const l=setTimeout(()=>a(!0),o);return()=>{clearTimeout(l)}},[o]),!s||!e?n(W,{}):typeof e=="function"?e():e}const _t=t=>{const{actions:e,children:o,actionProps:s,onActionComplete:a}=t;return n(Un,{onReset:a,hooks:e,args:s,children:o})},Gs=t=>{const{badges:e,children:o,badgeProps:s,...a}=t;return n(Un,{...a,hooks:e,args:s,children:o})},Ks=[];function $s(t){const{children:e,flatIndex:o,index:s,params:a,payload:l,siblingIndex:r}=t,{navigate:c,navigateIntent:d}=ze(),u=Ta(),p=i.useMemo(()=>(u==null?void 0:u.panes)||Ks,[u==null?void 0:u.panes]),h=s-1,f=i.useCallback(b=>{const g=p[h]||[],P=g[r],C=b(g,P),w=[...p.slice(0,h),C,...p.slice(h+1)],S={...u||{},panes:w};return setTimeout(()=>c(S),0),S},[h,c,p,u,r]),m=i.useCallback(b=>{f((g,P)=>[...g.slice(0,r),{...P,payload:b},...g.slice(r+1)])},[f,r]),v=i.useCallback(b=>{f((g,P)=>[...g.slice(0,r),{...P,params:b},...g.slice(r+1)])},[f,r]),y=i.useCallback(b=>{let{id:g,parentRefPath:P,type:C,template:w}=b;c({panes:[...p.slice(0,h+1),[{id:g,params:{template:w.id,parentRefPath:ka(P),type:C},payload:w.params}]]})},[h,c,p]),_=i.useMemo(()=>({index:o,groupIndex:h,siblingIndex:r,payload:l,params:a,hasGroupSiblings:p[h]?p[h].length>1:!1,groupLength:p[h]?p[h].length:0,routerPanesState:p,ChildLink:Ra,BackLink:Ma,ReferenceChildLink:Da,handleEditReference:y,ParameterizedLink:Oa,replaceCurrent:function(){let b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};f(()=>[{id:b.id||"",payload:b.payload,params:b.params||{}}])},closeCurrent:()=>{f((b,g)=>b.length>1?b.filter(P=>P!==g):b)},duplicateCurrent:b=>{f((g,P)=>{const C={...P,payload:(b==null?void 0:b.payload)||P.payload,params:(b==null?void 0:b.params)||P.params};return[...g.slice(0,r),C,...g.slice(r)]})},setView:b=>{const g=ut(a,"view");return v(b?{...g,view:b}:g)},setParams:v,setPayload:m,navigateIntent:d}),[o,h,y,f,d,a,l,p,v,m,r]);return n(La.Provider,{value:_,children:e})}function Xs(t,e,o,s){var a,l;const r={flex:t.left.flex+t.right.flex,width:t.left.width+t.right.width},c=(a=e.minWidth)!=null?a:ct,d=(l=o.minWidth)!=null?l:ct,u=Math.min(e.maxWidth||1/0,r.width-d),p=Math.min(o.maxWidth||1/0,r.width-c);let h=c-t.left.width;const f=t.right.width-p;h<f&&(h=f);let m=t.right.width-d;const v=u-t.left.width;m>v&&(m=v);const y=Math.min(Math.max(s,h),m),_=t.left.width+y,b=t.right.width-y,g=_/r.width*r.flex,P=b/r.width*r.flex;return{leftFlex:g,leftW:_,rightFlex:P,rightW:b}}function Ys(t,e){const o=[];let s=e;for(;s!==t;){const a=s.parentElement;if(!a)return o;const r=Array.from(a.childNodes).indexOf(s);if(o.unshift(r),a===t)return o;s=a}return o}const _n=[];function qs(t,e){const o=new WeakMap;for(const a of e)o.set(a,Ys(t,a));const s=(a,l)=>{const r=o.get(a)||_n,c=o.get(l)||_n,d=Math.max(r.length,c.length);for(let u=0;u<d;u+=1){const p=r[u]||-1,h=c[u]||-1;if(p!==h)return p-h}return 0};e.sort(s)}function Js(){const t=[],e=[],o=new WeakMap,s=new Set,a={};let l=null,r=0,c=null,d=new Map,u=!1;function p(g){s.add(g),c===g&&(c=null),b()}function h(g){s.delete(g),c=g,b()}function f(g,P){return o.set(g,{...P,original:P}),e.push(g),l&&qs(l,e),h(g),()=>{const C=e.indexOf(g);C>-1&&e.splice(C,1),o.delete(g),b()}}function m(g,P,C){var w,S,I,E;const k=e.indexOf(P),M=o.get(P);if(!M)return;const D=e[k+1],A=o.get(D);if(A){if(g==="start"&&(u=!0,a.left={element:P,flex:M.flex||1,width:P.offsetWidth},a.right={element:D,flex:A.flex||1,width:D.offsetWidth},b()),g==="move"&&a.left&&a.right){d=new Map;const{leftW:L,rightW:B,leftFlex:K,rightFlex:ae}=Xs(a,M,A,C);d.set(P,{flex:K,width:L}),d.set(D,{flex:ae,width:B}),b()}if(g==="end"){u=!1;const L=d.get(P),B=d.get(D);o.set(P,{...M,currentMinWidth:0,currentMaxWidth:(w=M.maxWidth)!=null?w:1/0,flex:(S=L==null?void 0:L.flex)!=null?S:M.flex}),o.set(D,{...A,currentMinWidth:0,currentMaxWidth:(I=M.maxWidth)!=null?I:1/0,flex:(E=B==null?void 0:B.flex)!=null?E:A.flex}),d=new Map,delete a.left,delete a.right,b()}}}function v(g){l=g}function y(g){r=g,b()}function _(g){return t.push(g),()=>{const P=t.push(g);P>-1&&t.splice(P,1)}}return{collapse:p,expand:h,mount:f,resize:m,setRootElement:v,setRootWidth:y,subscribe:_};function b(){var g,P,C,w;if(!r)return;const S=[];for(const L of e)L!==c&&S.unshift(L);c&&S.unshift(c);const I=new WeakMap,E=S.length,k=S[0],M=(E-1)*et;let D=r-M;for(const L of S){const B=o.get(L);if(!B)continue;const K=B.currentMinWidth||B.minWidth||ct,ae=L===k,J=s.has(L),Y=K>D,H=ae?!1:J||Y,Z=d.get(L);I.set(L,{element:L,collapsed:H,currentMinWidth:(g=Z==null?void 0:Z.width)!=null?g:B.currentMinWidth,currentMaxWidth:(P=Z==null?void 0:Z.width)!=null?P:B.currentMaxWidth,flex:(w=(C=Z==null?void 0:Z.flex)!=null?C:B.flex)!=null?w:1}),H?D-=et:D-=K-et}const A=[];for(const L of e){const B=I.get(L);B&&A.push(B)}for(const L of t)L({expandedElement:c||e[e.length-1]||null,panes:A,resizing:u})}}function Zs(t){const{children:e,minWidth:o,onCollapse:s,onExpand:a,...l}=t,r=i.useMemo(()=>Js(),[]),[c,d]=i.useState(null),u=je(c),p=(u==null?void 0:u.width)||0,h=p===void 0||!o?void 0:p<o,[f,m]=i.useState({expandedElement:null,panes:[],resizing:!1});i.useEffect(()=>r.setRootElement(c),[r,c]),i.useEffect(()=>r.setRootWidth(p),[r,p]),i.useEffect(()=>r.subscribe(m),[r]),i.useEffect(()=>{h!==void 0&&(h&&s&&s(),!h&&a&&a())},[h,s,a]);const v=i.useMemo(()=>({collapse:r.collapse,collapsed:h,expand:r.expand,expandedElement:f.expandedElement,mount:r.mount,panes:f.panes,resize:r.resize,resizing:f.resizing}),[h,r,f.expandedElement,f.panes,f.resizing]);return n(Aa.Provider,{value:v,children:n(ja,{"data-ui":"PaneLayout",...l,"data-collapsed":h?"":void 0,"data-resizing":f.resizing?"":void 0,"data-mounted":p?"":void 0,ref:d,children:e})})}class ge extends Error{constructor(e){let{message:o,context:s,helpId:a,cause:l}=e;super(o),this.context=s,this.helpId=a,this.cause=l}}const wn=new WeakMap;function Ne(t){const e=wn.get(t);if(e)return e;const o=As();return wn.set(t,o),o}const Cn=new WeakMap;function ao(t,e){const o=Cn.get(t)||new Map;if(o){const l=o.get(e);if(l)return l}const s=t[e];if(typeof s!="function")throw new Error("Expected property `".concat(e,"` to be a function but got ").concat(typeof s," instead."));const a=s.bind(t);return o.set(e,a),Cn.set(t,o),a}const Qs=t=>!!t&&typeof(t==null?void 0:t.then)=="function",ei=t=>ie(t)?typeof t.serialize=="function":!1,ti=t=>(e,o,s)=>{try{return t(e,o,s)}catch(a){throw a instanceof ge?a:new ge({message:typeof(a==null?void 0:a.message)=="string"?a.message:"",context:o,cause:a})}},ni=t=>function(){return t(...arguments).pipe(js(1),zs())};function so(t){const e=ti(ni(t((o,s,a)=>{if(!o)throw new ge({message:"Pane returned no child",context:s,helpId:"structure-item-returned-no-child"});return Qs(o)||ks(o)?to(o).pipe(Be(l=>e(l,s,a))):ei(o)?e(o.serialize(s),s,a):typeof o=="function"?e(o(s.id,s),s,a):oe(o)})));return e}async function oi(t){const e=new Map,s=so(d=>(u,p,h)=>{const f=u&&"".concat(Ne(u),"-").concat(p.path.join("__")),m=f&&e.get(f);if(m)return m;const v=d(u,p,h);return f&&e.set(f,v),v}),a=[[{id:"__edit__".concat(t.params.id),params:{...ut(t.params,["id"]),type:t.params.type},payload:t.payload}]];async function l(d){let{currentId:u,flatIndex:p,intent:h,params:f,parent:m,path:v,payload:y,unresolvedPane:_,levelIndex:b,structureContext:g}=d;var P;if(!_)return[];const{id:C,type:w,...S}=f,E=await oo(s(_,{id:u,splitIndex:0,parent:m,path:v,index:p,params:{},payload:void 0,structureContext:g},p));return E.type==="document"&&E.id===C?[{panes:[...v.slice(0,v.length-1).map(k=>[{id:k}]),[{id:C,params:S,payload:y}]],depthIndex:v.length,levelIndex:b}]:(P=E.canHandleIntent)!=null&&P.call(E,h,f,{pane:E,index:p})||E.type==="documentList"&&E.schemaTypeName===w&&E.options.filter==="_type == $type"?[{panes:[...v.map(k=>[{id:k}]),[{id:f.id,params:S,payload:y}]],depthIndex:v.length,levelIndex:b}]:E.type==="list"&&E.child&&E.items?(await Promise.all(E.items.map((k,M)=>k.type==="divider"?Promise.resolve([]):l({currentId:k._id||k.id,flatIndex:p+1,intent:h,params:f,parent:E,path:[...v,k.id],payload:y,unresolvedPane:typeof E.child=="function"?ao(E,"child"):E.child,levelIndex:M,structureContext:g})))).flat():[]}const c=(await l({currentId:"root",flatIndex:0,levelIndex:0,intent:t.intent,params:t.params,parent:null,path:[],payload:t.payload,unresolvedPane:t.rootPaneNode,structureContext:t.structureContext})).sort((d,u)=>d.depthIndex===u.depthIndex?d.levelIndex-u.levelIndex:d.depthIndex-u.depthIndex)[0];return c?c.panes:a}function re(){const t=i.useContext(Xo);if(!t)throw new Error("DeskTool: missing context value");return t}const ai=(t,e)=>{const o=t.replace(/^__edit__/,""),{params:s,payload:a,structureContext:{resolveDocumentNode:l}}=e,{type:r,template:c}=s;if(!r)throw new Error("Document type for document with ID ".concat(o," was not provided in the router params."));let d=l({schemaType:r,documentId:o});return d=d.id("editor").title("Editor"),c&&(d=d.initialValueTemplate(c,a)),d.serialize()};function si(t){var e,o;return"contextHash(".concat(JSON.stringify({id:t.id,parentId:parent&&Ne(parent),path:t.path,index:t.index,splitIndex:t.splitIndex,serializeOptionsIndex:(e=t.serializeOptions)==null?void 0:e.index,serializeOptionsPath:(o=t.serializeOptions)==null?void 0:o.path}),")")}const In=t=>{const e={type:t.type,id:t.routerPaneSibling.id,params:t.routerPaneSibling.params||{},payload:t.routerPaneSibling.payload||null,flatIndex:t.flatIndex,groupIndex:t.groupIndex,siblingIndex:t.siblingIndex,path:t.path,paneNode:t.type==="resolvedMeta"?Ne(t.paneNode):null};return"metaHash(".concat(JSON.stringify(e),")")};function Re(t){let{unresolvedPane:e,flattenedRouterPanes:o,parent:s,path:a,resolvePane:l,structureContext:r}=t;const[c,...d]=o,u=d[0],p={id:c.routerPaneSibling.id,splitIndex:c.siblingIndex,parent:s,path:[...a,c.routerPaneSibling.id],index:c.flatIndex,params:c.routerPaneSibling.params||{},payload:c.routerPaneSibling.payload,structureContext:r};try{return l(e,p,c.flatIndex).pipe(Be(h=>{const f={type:"resolvedMeta",...c,paneNode:h,path:p.path},m=d.map((y,_)=>({type:"loading",path:[...p.path,...d.slice(_).map((P,C)=>"[".concat(y.flatIndex+C,"]"))],paneNode:null,...y}));if(!d.length)return oe([f]);let v;return u!=null&&u.routerPaneSibling.id.startsWith("__edit__")?v=Re({unresolvedPane:ai,flattenedRouterPanes:d,parent:s,path:p.path,resolvePane:l,structureContext:r}):c.groupIndex===(u==null?void 0:u.groupIndex)?v=Re({unresolvedPane:e,flattenedRouterPanes:d,parent:s,path:a,resolvePane:l,structureContext:r}):v=Re({unresolvedPane:typeof h.child=="function"?ao(h,"child"):h.child,flattenedRouterPanes:d,parent:h,path:p.path,resolvePane:l,structureContext:r}),Xn(oe([f,...m]),v.pipe(se(y=>[f,...y])))}))}catch(h){if(h instanceof ge&&(h.context&&console.warn("Pane resolution error at index ".concat(h.context.index).concat(h.context.splitIndex>0?" for split pane index ".concat(h.context.splitIndex):"",": ").concat(h.message).concat(h.helpId?" - see ".concat(eo(h.helpId)):""),h),h.helpId==="structure-item-returned-no-child"))return oe([]);throw h}}function ii(t){let{routerPanesStream:e,rootPaneNode:o,initialCacheState:s={cacheKeysByFlatIndex:[],flattenedRouterPanes:[],resolvedPaneCache:new Map,resolvePane:()=>Rs},structureContext:a}=t;return e.pipe(se(r=>[[{id:"root"}],...r]),se(r=>r.flatMap((d,u)=>d.map((p,h)=>({routerPaneSibling:p,groupIndex:u,siblingIndex:h}))).map((d,u)=>({...d,flatIndex:u}))),as([]),Hs(),se(r=>{let[c,d]=r;for(let u=0;u<d.length;u++){const p=c[u],h=d[u];if(!nt(p,h))return{flattenedRouterPanes:d,diffIndex:u}}return{flattenedRouterPanes:d,diffIndex:d.length}}),Ht((r,c)=>{const{cacheKeysByFlatIndex:d,resolvedPaneCache:u}=r,{flattenedRouterPanes:p,diffIndex:h}=c,f=d.slice(0,h+1),m=d.slice(h+1),v=new Set(f.flatMap(b=>Array.from(b))),y=m.flatMap(b=>Array.from(b)).filter(b=>!v.has(b));for(const b of y)u.delete(b);return{flattenedRouterPanes:p,cacheKeysByFlatIndex:d,resolvedPaneCache:u,resolvePane:so(b=>(g,P,C)=>{const w=g&&"".concat(Ne(g),"-").concat(si(P)),S=w&&u.get(w);if(S)return S;const I=b(g,P,C);if(!w)return I;const E=d[C]||new Set;return E.add(w),d[C]=E,u.set(w,I),I})}},s),Be(r=>{let{flattenedRouterPanes:c,resolvePane:d}=r;return Re({unresolvedPane:o,flattenedRouterPanes:c,parent:null,path:[],resolvePane:d,structureContext:a})})).pipe(Ht((r,c)=>c.map((d,u)=>{const p=r[u];return!p||d.type!=="loading"?d:p.routerPaneSibling.id===d.routerPaneSibling.id?p:d}),[]),On((r,c)=>{if(r.length!==c.length)return!1;for(let d=0;d<c.length;d++){const u=r[d],p=c[d];if(In(u)!==In(p))return!1}return!0}))}function ri(){const t=i.useMemo(()=>new ss(1),[]),e=i.useMemo(()=>t.asObservable().pipe(se(s=>(s==null?void 0:s.panes)||[])),[t]),{state:o}=ze();return i.useEffect(()=>{t.next(o)},[o,t]),e}function ci(){const[t,e]=i.useState();if(t)throw t;const{structureContext:o,rootPaneNode:s}=re(),[a,l]=i.useState({paneDataItems:[],resolvedPanes:[],routerPanes:[]}),r=ri();return i.useEffect(()=>{const d=ii({rootPaneNode:s,routerPanesStream:r,structureContext:o}).pipe(se(u=>{const p=u.reduce((m,v)=>{const y=m[v.groupIndex]||[];return y[v.siblingIndex]=v.routerPaneSibling,m[v.groupIndex]=y,m},[]),h=p.length,f=u.map(m=>{var v;const{groupIndex:y,flatIndex:_,siblingIndex:b,routerPaneSibling:g,path:P}=m,C=g.id,w=p[y+1];return{active:y===h-2,childItemId:(v=w==null?void 0:w[0].id)!=null?v:null,index:_,itemId:g.id,groupIndex:y,key:"".concat(m.type==="loading"?"unknown":m.paneNode.id,"-").concat(C,"-").concat(b),pane:m.type==="loading"?at:m.paneNode,params:g.params||{},path:P.join(";"),payload:g.payload,selected:_===u.length-1,siblingIndex:b}});return{paneDataItems:f,routerPanes:p,resolvedPanes:f.map(m=>m.pane)}})).subscribe({next:u=>l(u),error:u=>e(u)});return()=>d.unsubscribe()},[s,r,o]),a}function li(t){let{panes:e}=t;const{navigate:o}=ze();return i.useEffect(()=>{o({panes:e},{replace:!0})},[o,e]),n(q,{height:"fill",children:n(xt,{ms:300,children:x(z,{align:"center",direction:"column",height:"fill",justify:"center",children:[n(ve,{muted:!0}),n(T,{marginTop:3,children:n(R,{muted:!0,size:1,children:"Redirectingâ€¦"})})]})})})}async function di(t,e,o){if(e&&o)return{id:e,type:o};if(!e&&o)return{id:Bs(),type:o};if(e&&!o){const s=await oo(t.resolveTypeForDocument(e));return{id:e,type:s}}throw new ge({message:"Neither document `id` or `type` was provided when trying to resolve intent."})}function ui(t){let{intent:e,params:o={},payload:s}=t;const{rootPaneNode:a,structureContext:l}=re(),r=Qn(),c=ee(o),d=ee(s),[u,p]=i.useState(null),[h,f]=i.useState(null),m=typeof c.id=="string"?c.id:void 0,v=typeof c.type=="string"?c.type:void 0;if(i.useEffect(()=>{const y={current:!1};async function _(){const{id:b,type:g}=await di(r,m,v);return oi({intent:e,params:{...c,id:b,type:g},payload:d,rootPaneNode:a,structureContext:l})}return _().then(b=>{y.current||p(b)}).catch(f),()=>{y.current=!0}},[r,m,e,c,d,a,l,v]),h)throw h;return u?n(li,{panes:u}):n(q,{height:"fill",children:n(xt,{ms:300,children:x(z,{align:"center",direction:"column",height:"fill",justify:"center",children:[n(ve,{muted:!0}),n(T,{marginTop:3,children:n(R,{align:"center",muted:!0,size:1,children:"Loadingâ€¦"})})]})})})}const pi=N.span(Xt||(Xt=j([`
  &:not(:last-child)::after {
    content: ' âž ';
    opacity: 0.5;
  }
`])));function hi(t){return t.replace(/\(\.\.\.\)\./g,`(...)
  .`).replace(/__WEBPACK_IMPORTED_MODULE_\d+_+/g,"").replace(/___default\./g,".").replace(new RegExp(" \\(https?:\\/\\/".concat(window.location.host),"g")," (")}function mi(t){let{error:e}=t;if(!(e instanceof ge))throw e;const{cause:o}=e,s=(o==null?void 0:o.stack)||e.stack,a=s&&!(o instanceof Qe)&&!e.message.includes("Module build failed:"),l=o instanceof Qe?o.path:[],r=o instanceof Qe&&o.helpId||e.helpId,c=i.useCallback(()=>{window.location.reload()},[]);return n(q,{height:"fill",overflow:"auto",padding:4,sizing:"border",tone:"critical",children:x(Ie,{children:[n(is,{as:"h2",children:"Encountered an error while reading structure"}),x(q,{marginTop:4,padding:4,radius:2,overflow:"auto",shadow:1,tone:"inherit",children:[l.length>0&&x(X,{space:2,children:[n(Ut,{children:"Structure path"}),n(it,{children:l.slice(1).map((d,u)=>n(pi,{children:d},"".concat(d,"-").concat(u)))})]}),x(X,{marginTop:4,space:2,children:[n(Ut,{children:"Error"}),n(it,{children:a?hi(s):e.message})]}),r&&n(T,{marginTop:4,children:n(R,{children:n("a",{href:eo(r),rel:"noopener noreferrer",target:"_blank",children:"View documentation"})})}),n(T,{marginTop:4,children:n(G,{text:"Reload",icon:Wn,tone:"primary",onClick:c})})]})]})})}function fi(t){const{isSelected:e,pane:o,paneKey:s}=t,a=ie(o)&&o.type||null;return x(De,{id:s,selected:e,children:[n(Ae,{title:"Unknown pane type"}),n(we,{children:n(T,{padding:4,children:typeof a=="string"?x(R,{as:"p",muted:!0,children:["Structure item of type ",n("code",{children:a})," is not a known entity."]}):x(R,{as:"p",muted:!0,children:["Structure item is missing required ",n("code",{children:"type"})," property."]})})})]})}function gi(t){const e=[{ms:300,message:"Loadingâ€¦"},{ms:5e3,message:"Still loadingâ€¦"}],o=oe(null);return rs(...e.map(s=>{let{ms:a,message:l}=s;return o.pipe(cs(l),ls(a))}))}const bi="Loadingâ€¦",vi=N(z)(Yt||(Yt=j([`
  opacity: 0;
  transition: opacity 200ms;

  &[data-mounted] {
    opacity: 1;
  }
`]))),We=i.memo(t=>{const{delay:e=300,flex:o,message:s=gi,minWidth:a,paneKey:l,path:r,selected:c,title:d,tone:u}=t,p=i.useMemo(()=>typeof s=="function"?s(r?r.split(";"):[]):s,[s,r]),[h,f]=i.useState(()=>typeof p=="string"?p:bi);i.useEffect(()=>{if(typeof p!="object"||typeof p.subscribe=="function")return;const g=p.subscribe(f);return()=>g.unsubscribe()},[p]);const[m,v]=i.useState(null),[y,_]=i.useState(!1);return i.useEffect(()=>{if(m)return Yo(()=>_(!0))},[m]),n(De,{flex:o,id:l,minWidth:a,selected:c,tone:u,children:n(we,{children:x(vi,{align:"center","data-mounted":y?"":void 0,direction:"column",height:"fill",justify:"center",ref:v,children:[n(ve,{muted:!0}),(d||h)&&n(T,{marginTop:3,children:n(R,{align:"center",muted:!0,size:1,children:d||h})})]})})})});We.displayName="LoadingPane";const yi={component:i.lazy(()=>ke(()=>import("./index-f05dc04f-cec840d8.js"),["static/index-f05dc04f-cec840d8.js","static/sanity-fb6781c5.js","static/json-inspector-5dc76863.js"])),document:i.lazy(()=>ke(()=>import("./index-6a55f8a0-e0b470da.js"),["static/index-6a55f8a0-e0b470da.js","static/sanity-fb6781c5.js","static/json-inspector-5dc76863.js"])),documentList:i.lazy(()=>ke(()=>import("./index-b03c230d-6ff75526.js"),["static/index-b03c230d-6ff75526.js","static/sanity-fb6781c5.js","static/PaneItem-7b9cb213-98d9b89c.js","static/json-inspector-5dc76863.js"])),list:i.lazy(()=>ke(()=>import("./index-f3c5a6f6-f1c2cd84.js"),["static/index-f3c5a6f6-f1c2cd84.js","static/sanity-fb6781c5.js","static/PaneItem-7b9cb213-98d9b89c.js","static/json-inspector-5dc76863.js"]))},Pi=i.memo(function(e){const{active:o,childItemId:s,groupIndex:a,index:l,itemId:r,pane:c,paneKey:d,params:u,payload:p,selected:h,siblingIndex:f}=e,m=yi[c.type]||fi;return n($s,{flatIndex:l,index:a,params:u,payload:p,siblingIndex:f,children:n(i.Suspense,{fallback:n(We,{paneKey:d}),children:n(m,{childItemId:s||"",index:l,itemId:r,isActive:o,isSelected:h,paneKey:d,pane:c})})})},(t,e)=>{let{params:o={},payload:s=null,...a}=t,{params:l={},payload:r=null,...c}=e;if(!nt(o,l)||!nt(s,r))return!1;const d=new Set([...Object.keys(a),...Object.keys(c)]);for(const u of d)if(a[u]!==c[u])return!1;return!0});function io(t){const{children:e,flex:o,minWidth:s,paneKey:a,title:l="Error",tone:r="critical"}=t;return x(De,{flex:o,id:a,minWidth:s,tone:r,children:[n(Ae,{title:l}),n(we,{overflow:"auto",children:n(T,{paddingX:4,paddingY:5,children:e})})]})}function Si(t){return t==="delete"?`An error occurred while attempting to delete this document.
      This usually means that there are other documents that refers to it.`:t==="unpublish"?`An error occurred while attempting to unpublish this document.
      This usually means that there are other documents that refers to it.`:"An error occurred during ".concat(t)}function xi(t){return t==="publish"?"The document was published":t==="unpublish"?"The document was unpublished. A draft has been created from the latest published version.":t==="discardChanges"?"All changes since last publish has now been discarded. The discarded draft can still be recovered from history":t==="delete"?"This document was deleted. It can still be recovered from history and if you continue editing it will be recreated.":"Successfully performed ".concat(t," on document")}const _i=["patch","commit"],wi=i.memo(function(){const{push:e}=Oe(),{documentId:o,documentType:s}=V(),a=qo(o,s),l=i.useRef(a);return i.useEffect(()=>{!a||a===l.current||(a.type==="error"&&e({closable:!0,duration:3e4,status:"error",title:Si(a.op),description:x("details",{children:[n("summary",{children:"Details"}),a.error.message]})}),a.type==="success"&&!_i.includes(a.op)&&e({closable:!0,status:"success",title:xi(a.op)}),l.current=a)},[a,e]),null}),Ci=t=>{const{features:e,hasValue:o,changesOpen:s}=t;return e.reviewChanges?{action:"reviewChanges",title:"Review changes",icon:ds,isDisabled:s||!o}:null},Ii=t=>{let{hasValue:e}=t;return{action:"inspect",title:"Inspect",icon:us,isDisabled:!e,shortcut:"Ctrl+Alt+I"}},Ei=t=>{let{previewUrl:e}=t;return e?{action:"production-preview",title:"Open preview",icon:ps,shortcut:"Ctrl+Alt+O"}:null},Ti=t=>[Ei,Ci,Ii].filter(Boolean).map(o=>o(t)).filter(o=>o!==null),ki=t=>ie(t)&&typeof t._id=="string"&&typeof t._type=="string";function Ri(t){const[e,o]=i.useState(void 0),[s,a]=i.useState(null),{resolveProductionUrl:l}=Le().document,r=Us(t);if(s)throw s;return i.useEffect(()=>{r.pipe(Gn(500),Be(c=>ki(c)?to(l({document:c})):oe(void 0)),za(c=>{const d=ie(c)&&typeof c.message=="string"?c.message:"Unknown error";throw new Error("An error was thrown while trying to get your preview url: ".concat(d))})).subscribe({next:o,error:a})},[l,r]),e}function Mi(t,e){const o=e.panePayload||{},s=e.templateName;e.urlTemplate&&s&&s!==e.urlTemplate&&console.warn('Conflicting templates: URL says "'.concat(e.urlTemplate,'", structure node says "').concat(s,'". Using "').concat(s,'".'));const a=s||e.urlTemplate,l=t.filter(d=>d.schemaType===e.documentType),r={...e.templateParams,...typeof o=="object"?o||{}:{}};let c=a;return!a&&l.length===1&&(c=l[0].id),{templateName:c,templateParams:r}}const Di={},ro=i.memo(t=>{const{children:e,index:o,pane:s,paneKey:a}=t,l=Jo(Zo),r=Ln(),c=An(),{actions:d,badges:u,unstable_languageFilter:p}=Le().document,h=Qo(),f=ea(),m=Ce(),{features:v}=re(),{push:y}=Oe(),{options:_,menuItemGroups:b,title:g=null,views:P=[]}=s,C=ee(_),w=C.id,S=ot(w),I=_.type,E=ee(m.params),k=ee(m.payload),{templateName:M,templateParams:D}=i.useMemo(()=>Mi(c,{documentType:I,templateName:C.template,templateParams:C.templateParameters,panePayload:k,urlTemplate:E==null?void 0:E.template}),[I,C,E,k,c]),A=ta({documentId:S,documentType:I,templateName:M,templateParams:D}),L=ee(A),{patch:B}=na(S,I),K=oa(S,I),{validation:ae}=aa(S,I),J=sa(S,I),Y=r.get(I),H=(K==null?void 0:K.draft)||(K==null?void 0:K.published)||L.value,Z=i.useMemo(()=>d({schemaType:I,documentId:S}),[d,S,I]),bo=i.useMemo(()=>u({schemaType:I,documentId:S}),[u,S,I]),vo=i.useMemo(()=>p({schemaType:I,documentId:S}),[S,I,p]),Ct=ee(ae),Ve=ee(P),F=m.params||Di,[It,ye]=i.useState(()=>F.path?xe(F.path):[]),yo=F.view||Ve[0]&&Ve[0].id||null,Fe=i.useMemo(()=>h.getTimeline({publishedId:S,enableTrace:jn}),[S,h]),[Po,So]=i.useState("closed"),{historyController:Q}=zn(()=>h.getTimelineController({client:l,documentId:S,documentType:I,timeline:Fe}),[l,S,I,Fe]);Q.setRange(F.since||null,F.rev||null);const Pe=Q.changesPanelActive(),ce=Ri(H),[xo,_o]=i.useState([]);i.useEffect(()=>{const O=f.documentPresence(S).subscribe(U=>{_o(U)});return()=>{O.unsubscribe()}},[S,f]);const Et=!!H,He=i.useMemo(()=>Ti({features:v,hasValue:Et,changesOpen:Pe,previewUrl:ce}),[v,Et,Pe,ce]),Ue=F.inspect==="on",Tt=Pe?Q.sinceAttributes():(K==null?void 0:K.published)||null,Ge=J==="connected"&&K.ready,kt=Q.onOlderRevision(),Rt=i.useMemo(()=>kt?Q.displayed()||{_id:H._id,_type:H._type}:H,[Q,F.rev,F.since,H,kt]),wo=i.useCallback((O,U)=>{m.setParams({...m.params,since:O,rev:U||void 0})},[m]),Co=i.useCallback(O=>{ye(O),f.setLocation([{type:"document",documentId:S,path:O,lastActiveAt:new Date().toISOString()}])},[S,f,ye]),Io=i.useCallback(O=>{ye([])},[ye]),Mt=i.useRef(()=>{throw new Error("Nope")});Mt.current=O=>{B.execute(ia(O.patches),L.value)};const Eo=i.useCallback(O=>Mt.current(O),[]),To=i.useCallback(()=>{m.setParams({...F,since:void 0})},[m,F]),Ke=i.useCallback(()=>{m.setParams({...F,since:"@lastPublished"})},[m,F]),ko=i.useCallback(()=>m.closeCurrent(),[m]),Ro=i.useCallback(()=>m.duplicateCurrent(),[m]),Te=i.useCallback(function(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!Ue)?m.setParams({...F,inspect:"on"}):m.setParams(ut(F,"inspect"))},[Ue,m,F]),$e=i.useCallback(O=>O.action==="production-preview"&&ce?(window.open(ce),!0):O.action==="inspect"?(Te(!0),!0):O.action==="reviewChanges"?(Ke(),!0):!1,[Ke,ce,Te]),Mo=i.useCallback(O=>{for(const U of He)if(U.shortcut&&pt(U.shortcut,O)){O.preventDefault(),O.stopPropagation(),$e(U);return}},[$e,He]),Do=i.useCallback(()=>Te(!1),[Te]),[Oo,Dt]=i.useState([]),[Lo,Ot]=i.useState(),[Lt,At]=i.useState(),[jt,zt]=i.useState(),Ao=i.useCallback((O,U)=>{At($=>de($,O,U))},[]),jo=i.useCallback((O,U)=>{zt($=>de($,O,U))},[]),zo=i.useCallback((O,U)=>Ot($=>de($,O,U)),[]),Bo=H._createdAt?"update":"create",Bt=i.useMemo(()=>!!(Y!=null&&Y.liveEdit),[I,r]),Xe=H._id?H._id:"dummy-id",No=i.useMemo(()=>({...H,_id:Bt?ot(Xe):ra(Xe)}),[Bt,H,Xe]),[Se,Ye]=ca({document:No,permission:Bo}),{revTime:Nt}=Q,Wt=!(H!=null&&H._id),Wo=i.useMemo(()=>{const O=!Ye&&!(Se!=null&&Se.granted),U=!Vt(Y,"update"),$=Wt&&!Vt(Y,"create");return!Ge||Nt!==null||O||U||$||J==="reconnecting"},[J,Wt,Ye,Se==null?void 0:Se.granted,Ge,Nt,Y]),qe=la(Y,{value:Rt,readOnly:Wo,comparisonValue:Tt,focusPath:It,openPath:Oo,collapsedPaths:Lt,presence:xo,validation:Ct,collapsedFieldSets:jt,fieldGroupState:Lo,changesOpen:Pe}),Je=i.useRef(qe);Je.current=qe;const Vo=i.useCallback(O=>{da(Je.current,O).forEach($=>{$.type==="expandPath"&&At(le=>de(le,$.path,!1)),$.type==="expandFieldSet"&&zt(le=>de(le,$.path,!1)),$.type==="setSelectedGroup"&&Ot(le=>de(le,$.path,$.groupName))}),Dt(O)},[Je]),Fo={actions:Z,activeViewId:yo,badges:bo,changesOpen:Pe,collapsedFieldSets:jt,collapsedPaths:Lt,compareValue:Tt,connectionState:J,displayed:Rt,documentId:S,documentIdRaw:w,documentType:I,editState:K,focusPath:It,menuItems:He,onBlur:Io,onChange:Eo,onFocus:Co,onPathOpen:Vo,onHistoryClose:To,onHistoryOpen:Ke,onInspectClose:Do,onKeyUp:Mo,onMenuAction:$e,onPaneClose:ko,onPaneSplit:Ro,onSetActiveFieldGroup:zo,onSetCollapsedPath:Ao,onSetCollapsedFieldSet:jo,historyController:Q,index:o,inspectOpen:Ue,validation:Ct,menuItemGroups:b||[],paneKey:a,previewUrl:ce,ready:Ge,schemaType:Y,isPermissionsLoading:Ye,permissions:Se,setTimelineMode:So,setTimelineRange:wo,timeline:Fe,timelineMode:Po,title:g,value:H,views:Ve,formState:qe,unstable_languageFilter:vo};return i.useEffect(()=>{J==="reconnecting"&&y({id:"sanity/desk/reconnecting",status:"warning",title:n(W,{children:"Connection lost. Reconnectingâ€¦"})})},[J,y]),i.useEffect(()=>{ye(F.path?xe(F.path):[]),Dt([])},[F.path,S]),n(ua.Provider,{value:Fo,children:e})});ro.displayName="DocumentPaneProvider";const Oi={create:"created",delete:"deleted",discardDraft:"discarded draft",initial:"created",editDraft:"edited",editLive:"live edited",publish:"published",unpublish:"unpublished"},Li={create:Kt,delete:Ns,discardDraft:_e,initial:Kt,editDraft:$t,editLive:$t,publish:Zn,unpublish:Ws};function lt(t){return Oi[t]}function Ai(t){return Li[t]}function ji(t,e){return{topSelection:e,bottomSelection:t,disabledBeforeSelection:!0}}function zi(t){return{topSelection:t,bottomSelection:t}}function Bi(t){let{maxLength:e,userIds:o}=t;return n(Kn,{maxLength:e,children:o.map(s=>n($n,{user:s,withTooltip:!0},s))})}const pe=N(z)(t=>{let{theme:e}=t;var o;const s=(o=e.sanity.color.base.skeleton)==null?void 0:o.from;return te(qt||(qt=j([`
    --timeline-hairline-width: 1px;
    position: relative;
    z-index: 2;
    margin: 0;
    padding: 0;

    &::before {
      position: absolute;
      content: '';
      height: 100%;
      width: var(--timeline-hairline-width);
      background: `,`;
      top: 0;
      left: calc((100% - var(--timeline-hairline-width)) / 2);
      z-index: 1;
    }
  `])),s)}),Ni=N(Bn)(t=>{let{state:e="enabled",isHovered:o,theme:s}=t;const{color:a}=s.sanity,l=a.button.default.primary.enabled;return te(Jt||(Jt=j([`
    position: relative;
    min-width: 244px;

    `,`

    `,`

      `,`

    // line styling ðŸ‘‡
      &:first-child `,`::before {
      height: 50%;
      top: unset;
      bottom: 0;
    }

    &:last-child `,`::before {
      height: 50%;
    }

    `,`

    // Remove timeline lines when using the keyboard to navigate timeline items
    &:focus `,`::before {
      background: transparent;
    }
  `])),e==="selected"&&te(Zt||(Zt=j([`
      --card-bg-color: `,`;
      --card-fg-color: `,`;
      --card-muted-fg-color: `,`;
      --card-border-color: `,`;
      &:not([data-selection-bottom='true']) {
        border-top-left-radius: 0;
        border-top-right-radius: 0;
      }
    `])),l.bg,l.fg,l.muted,l.bg),e==="withinSelection"&&te(Qt||(Qt=j([`
      border-bottom-left-radius: 0;
      border-bottom-right-radius: 0;
      box-shadow: 0px 3px 0px 0px var(--card-bg-color);
      &:not([data-selection-top='true']) {
        border-radius: 0;
      }

      `,` {
        &::before {
          background: var(--card-hairline-soft-color);
        }
      }
    `])),pe),e==="disabled"&&te(en||(en=j([`
      [data-ui='Avatar'] {
        opacity: 0.2;
      }
    `]))),pe,pe,(o||e==="selected")&&te(tn||(tn=j([`
      `,`::before {
        background: transparent;
      }
    `])),pe),pe)}),Wi=N(T)(nn||(nn=j([`
  background: var(--card-bg-color);
  border-radius: 50px;
  position: relative;
  z-index: 2;
`]))),Vi=N(R)(on||(on=j([`
  text-transform: capitalize;
`]))),Fi=N(T)(an||(an=j([`
  min-width: 1rem;
  margin-left: `,`;
`])),t=>{let{theme:e}=t;return"-".concat(ue(e.sanity.space[1]))}),Hi={initial:"primary",create:"primary",publish:"positive",editLive:"caution",editDraft:"caution",unpublish:"critical",discardDraft:"critical",delete:"critical",withinSelection:"primary"};function Ui(t){const{isSelectionBottom:e,isSelectionTop:o,state:s,onSelect:a,timestamp:l,chunk:r,type:c}=t,d=Ai(c),u=Array.from(r.authors),p=ne(l,{minimal:!0}),h=i.useMemo(()=>{const b=new Date(l);return Ms(b,"MMM d, yyyy, hh:mm a")},[l]),f=s==="selected",m=s==="withinSelection",[v,y]=i.useState(!1),_=i.useCallback(b=>{b.preventDefault(),b.stopPropagation(),a(r)},[a,r]);return n(Ni,{"data-ui":"timelineItem",radius:2,"data-chunk-id":r.id,padding:0,tone:v||f||m?"default":Hi[c],pressed:m,state:s,selected:f,isHovered:v,disabled:s==="disabled","data-selection-bottom":e,"data-selection-top":o,onClick:_,children:n(be,{portal:!0,placement:"left",fallbackPlacements:["bottom"],content:n(X,{padding:3,space:3,children:n(R,{size:1,children:h})}),children:n(T,{onMouseEnter:()=>y(!0),onMouseLeave:()=>y(!1),paddingX:2,children:x(z,{align:"stretch",children:[n(pe,{align:"center",children:n(Wi,{padding:2,children:n(R,{size:2,children:d&&i.createElement(d)})})}),x(X,{space:2,margin:2,children:[n(T,{children:n(Vi,{size:1,weight:"medium",children:lt(c)||n("code",{children:c})})}),n(Fi,{paddingX:1,children:n(R,{size:0,muted:!0,children:p})})]}),n(z,{flex:1,justify:"flex-end",align:"center",children:n(Bi,{maxLength:3,userIds:u})})]})})})})}const Gi=N(T)(sn||(sn=j([`
  overflow: auto;
  -webkit-overflow-scrolling: touch;
`]))),Ki=N(X)(rn||(rn=j([`
  max-width: 200px;
`]))),$i=N(ht)(cn||(cn=j([`
  overflow: auto;
  box-sizing: border-box;
  max-height: calc(100vh - 198px);
`]))),Xi=20,dt=t=>{let{timeline:e,disabledBeforeSelection:o,topSelection:s,bottomSelection:a,onSelect:l,onLoadMore:r}=t;const c=i.useRef(null),d=i.useRef(null),[u,p]=i.useState(null);let h=o?"disabled":"enabled";const f=i.useCallback(()=>{const m=c.current;if(u&&m){const{offsetHeight:v,scrollTop:y}=m,_=v+y+Xi,b=u.offsetTop<_;b&&requestAnimationFrame(()=>r(b))}},[r,u]);return i.useEffect(f,[f]),x(Gi,{ref:c,onScroll:f,"data-ui":"timeline",children:[e.chunkCount===0&&x(Ki,{padding:3,space:3,children:[n(R,{size:1,weight:"semibold",children:"No document history"}),n(R,{muted:!0,size:1,children:"When changing the content of the document, the document versions will appear in this menu."})]}),e.chunkCount>0&&n($i,{ref:d,padding:1,space:0,children:e.mapChunks(m=>{const v=s===m,y=a===m;v&&(h="withinSelection"),y&&(h="selected");const _=n(Ui,{chunk:m,isSelectionBottom:y,isSelectionTop:v,state:h,onSelect:l,type:m.type,timestamp:m.endTimestamp},m.id);return h==="selected"&&(h="enabled"),_})}),!e.reachedEarliestEntry&&n(z,{align:"center",justify:"center",padding:4,ref:p,children:n(ve,{muted:!0})})]})};dt.displayName="Timeline";const Yi=N(mt)(ln||(ln=j([`
  & > div {
    display: flex;
    flex-direction: column;

    & > [data-ui='Card'] {
      flex: 1;
      min-height: 0;
      display: flex;
      flex-direction: column;

      /* This is the scrollable container rendered by <Timeline /> */
      & > div {
        flex: 1;
        min-height: 0;
      }
    }
  }
`])));function co(t){let{chunk:e,mode:o,placement:s}=t;const{historyController:a,setTimelineRange:l,setTimelineMode:r,timeline:c,ready:d}=V(),[u,p]=i.useState(!1),[h,f]=i.useState(null),[m,v]=i.useState(null),y=i.useCallback(()=>{r(o),p(!0)},[o,r]),_=i.useCallback(()=>{r("closed"),p(!1)},[r]),b=i.useCallback(()=>{_()},[_]),g=i.useCallback(A=>{u&&(A.key==="Escape"||A.key==="Tab")&&(_(),h==null||h.focus())},[h,_,u]);vt(b,[m,h]),yt(g);const P=i.useCallback(A=>{const[L,B]=a.findRangeForNewRev(A);r("closed"),p(!1),l(L,B)},[a,r,l]),C=i.useCallback(A=>{const[L,B]=a.findRangeForNewSince(A);r("closed"),p(!1),l(L,B)},[a,r,l]),w=i.useCallback(A=>{a.setLoadMore(A)},[a]),S=u&&n("div",{ref:v,children:o==="rev"?n(dt,{onSelect:P,onLoadMore:w,timeline:c,...zi(a.realRevChunk)}):n(dt,{onSelect:C,onLoadMore:w,timeline:c,...ji(a.sinceTime,a.realRevChunk)})}),I=ne((e==null?void 0:e.endTimestamp)||"",{agoSuffix:!0}),E=e?"".concat(Ba(lt(e.type))," ").concat(I):"Current version",k=e?"Since ".concat(lt(e.type)," ").concat(I):"Since unknown version";return n(Yi,{constrainSize:!0,content:S,"data-ui":"versionMenu",open:u,placement:s,portal:!0,children:n(G,{disabled:!d,mode:"bleed",fontSize:1,padding:2,iconRight:Na,onClick:u?_:y,ref:f,selected:u,text:u?o==="rev"?"Select version":"Review changes since":o==="rev"?E:k})})}function qi(){return x(z,{align:"center",justify:"center",children:[n(ve,{muted:!0}),n(T,{marginTop:3,children:n(R,{align:"center",children:"Loading changesâ€¦"})})]})}function Ji(t){const e=new Map;return hs(t,o=>{if(o.action==="unchanged"||!("annotation"in o)||!o.annotation)return!0;const{author:s,timestamp:a}=o.annotation,l=e.get(s);return(!l||l.timestamp<a)&&e.set(s,o.annotation),!0}),Array.from(e.values()).sort((o,s)=>o.timestamp<s.timestamp?1:-1)}const Zi=N(Nn)(dn||(dn=j([`
  height: 100%;
  overflow: auto;
  position: relative;
  scroll-behavior: smooth;
`])));function Qi(){const{documentId:t,onHistoryClose:e,historyController:o,schemaType:s,value:a}=V(),{collapsed:l}=Wa(),r=i.useRef(null),d=o.selectionState==="loading",u=o.sinceTime,p=o.currentObjectDiff(),h=!o.onOlderRevision(),f=fe.useMemo(()=>({documentId:t,schemaType:s,FieldWrapper:Va,rootDiff:p,isComparingCurrent:h,value:a}),[t,p,h,s,a]),m=fe.useMemo(()=>p?Ji(p):[],[p]);return l?null:x(z,{direction:"column",flex:1,style:{borderLeft:"1px dashed var(--card-border-color)",overflow:"hidden",minWidth:320},"data-testid":"review-changes-pane",children:[n(Ae,{actions:n(G,{icon:_e,mode:"bleed",onClick:e,padding:3,title:"Hide changes panel"}),subActions:m.length>0&&n(T,{paddingRight:1,children:n(Fa,{annotations:m,description:"Changes by",placement:"bottom-end",children:n(Kn,{maxLength:4,children:m.map(v=>{let{author:y}=v;return n($n,{user:y},y)})})})}),tabs:n(co,{mode:"since",chunk:u,placement:"bottom-start"}),title:"Changes"}),n(we,{children:n(bt,{element:r.current,children:n(Zi,{"data-ui":"Scroller",ref:r,children:n(T,{flex:1,padding:4,children:n(er,{diff:p,documentContext:f,loading:d})})})})})]})}function er(t){let{diff:e,documentContext:o,loading:s}=t;const{schemaType:a}=V();return s?n(qi,{}):e?n(Ua.Provider,{value:o,children:n(Ga,{diff:e,schemaType:a})}):n(Ha,{})}function tr(t,e,o){const s=pa(),[a,l]=i.useState(o),r=i.useMemo(()=>s.forNamespace("desk-tool"),[s]),c=i.useMemo(()=>t?r.forNamespace(t).forKey(e):r.forKey(e),[r,t,e]);i.useEffect(()=>{const u=c.listen(o).subscribe({next:l});return()=>u==null?void 0:u.unsubscribe()},[o,e,t,c]);const d=i.useCallback(u=>{l(u),c.set(u)},[c]);return i.useMemo(()=>[a,d],[d,a])}const he={id:"parsed",title:"Parsed"},me={id:"raw",title:"Raw JSON"},nr=[he,me],Me=Vs(1e3);function lo(t,e){const o=Me.get(t);return o===void 0?(Me.set(t,Array.isArray(e)||ie(e)),lo(t,e)):o}function or(t){const{path:e}=t,o=Me.get(e);o!==void 0&&Me.set(e,!o)}function uo(t){const e=window.getSelection();if(e){const o=document.createRange();e.removeAllRanges(),o.selectNodeContents(t),e.addRange(o)}}function En(t){uo(t.currentTarget)}function ar(t){t.keyCode===65&&(t.metaKey||t.ctrlKey)&&(t.preventDefault(),uo(t.currentTarget))}function sr(t){return ie(t)&&Gt(t._id)&&Gt(t._type)}const ir=N.div(t=>{let{theme:e}=t;const{color:o,fonts:s,space:a}=e.sanity;return te(un||(un=j([`
    & .json-inspector,
    & .json-inspector .json-inspector__selection {
      font-family: `,`;
      font-size: `,`px;
      line-height: `,`px;
      color: var(--card-code-fg-color);
    }

    & .json-inspector .json-inspector__leaf {
      padding-left: `,`;
    }

    & .json-inspector .json-inspector__leaf.json-inspector__leaf_root {
      padding-top: `,`;
      padding-left: 0;
    }

    & .json-inspector > .json-inspector__leaf_root > .json-inspector__line > .json-inspector__key {
      display: none;
    }

    & .json-inspector .json-inspector__line {
      display: block;
      position: relative;
      cursor: default;
    }

    & .json-inspector .json-inspector__line::after {
      content: '';
      position: absolute;
      top: 0;
      left: -200px;
      right: -50px;
      bottom: 0;
      z-index: -1;
      pointer-events: none;
    }

    & .json-inspector .json-inspector__line:hover::after {
      background: var(--card-code-bg-color);
    }

    & .json-inspector .json-inspector__leaf_composite > .json-inspector__line {
      cursor: pointer;
    }

    & .json-inspector .json-inspector__leaf_composite > .json-inspector__line::before {
      content: 'â–¸ ';
      margin-left: calc(0 - `,` + 3px);
      font-size: `,`px;
      line-height: `,`px;
    }

    &
      .json-inspector
      .json-inspector__leaf_expanded.json-inspector__leaf_composite
      > .json-inspector__line::before {
      content: 'â–¾ ';
      font-size: `,`px;
      line-height: `,`px;
    }

    & .json-inspector .json-inspector__radio,
    & .json-inspector .json-inspector__flatpath {
      display: none;
    }

    & .json-inspector .json-inspector__value {
      margin-left: `,`;
    }

    &
      .json-inspector
      > .json-inspector__leaf_root
      > .json-inspector__line
      > .json-inspector__key
      + .json-inspector__value {
      margin: 0;
    }

    & .json-inspector .json-inspector__key {
      color: `,`;
    }

    & .json-inspector .json-inspector__value_helper,
    & .json-inspector .json-inspector__value_null {
      color: `,`;
    }

    & .json-inspector .json-inspector__not-found {
      padding-top: `,`;
    }

    & .json-inspector .json-inspector__value_string {
      color: `,`;
    }

    & .json-inspector .json-inspector__value_boolean {
      color: `,`;
    }

    & .json-inspector .json-inspector__value_number {
      color: `,`;
    }

    & .json-inspector .json-inspector__show-original {
      display: inline-block;
      padding: 0 6px;
      cursor: pointer;
    }

    & .json-inspector .json-inspector__show-original:hover {
      color: inherit;
    }

    & .json-inspector .json-inspector__show-original::before {
      content: 'â†”';
    }

    & .json-inspector .json-inspector__show-original:hover::after {
      content: ' expand';
    }
  `])),s.code.family,s.code.sizes[2].fontSize,s.code.sizes[2].lineHeight,ue(a[4]),ue(a[3]),ue(a[4]),s.code.sizes[2].fontSize,s.code.sizes[2].lineHeight,s.code.sizes[2].fontSize,s.code.sizes[2].lineHeight,ue(a[4]/2),o.syntax.property,o.syntax.constant,ue(a[3]),o.syntax.string,o.syntax.boolean,o.syntax.number)});function rr(t){const{onChange:e,query:o}=t,s=i.useCallback(a=>e(a.target.value),[e]);return n(Ds,{icon:Os,onChange:s,placeholder:"Search",radius:2,value:o||""})}function cr(t){const{value:e}=t,{onInspectClose:o,paneKey:s}=V(),a="".concat(s,"_inspect_"),[l,r]=tr("desk-tool","inspect-view-preferred-view-mode-".concat(s),"parsed"),c=nr.find(p=>p.id===l),d=i.useCallback(()=>{r(he.id)},[r]),u=i.useCallback(()=>{r(me.id)},[r]);return n(St,{id:"".concat(a,"dialog"),header:sr(e)?x(W,{children:["Inspecting"," ",n("em",{children:n(ms,{document:e})})]}):n("em",{children:"No value"}),onClose:o,onClickOutside:o,width:3,children:x(z,{direction:"column",height:"fill",children:[n(q,{padding:3,shadow:1,style:{position:"sticky",bottom:0,zIndex:3},children:x(Yn,{space:1,children:[n(st,{"aria-controls":"".concat(a,"tabpanel"),fontSize:1,id:"".concat(a,"tab-").concat(he.id),label:he.title,onClick:d,selected:c===he}),n(st,{"aria-controls":"".concat(a,"tabpanel"),fontSize:1,id:"".concat(a,"tab-").concat(me.id),label:me.title,onClick:u,selected:c===me})]})}),x(fs,{"aria-labelledby":"".concat(a,"tab-").concat(l),flex:1,id:"".concat(a,"tabpanel"),overflow:"auto",padding:4,style:{outline:"none"},children:[c===he&&n(ir,{children:n(Fs,{data:e,isExpanded:lo,onClick:or,search:rr})}),c===me&&n(it,{language:"json",tabIndex:0,onKeyDown:ar,onDoubleClick:En,onFocus:En,children:JSON.stringify(e,null,2)})]})]})})}const lr=N(q)(pn||(pn=j([`
  position: relative;
  z-index: 50;
`]))),Tn=N(R)(hn||(hn=j([`
  & > * {
    overflow: hidden;
    white-space: nowrap;
    text-overflow: ellipsis;
  }
`]))),po=i.memo(()=>{var t,e,o,s,a,l;const r=ha(),{params:c,groupIndex:d,routerPanesState:u,replaceCurrent:p,BackLink:h}=Ce(),f=(t=u[d])==null?void 0:t[0].id,m=u[d-1],v=m==null?void 0:m[0],y=v==null?void 0:v.id,_=!!((e=v==null?void 0:v.params)!=null&&e.rev),b=i.useMemo(()=>(c==null?void 0:c.parentRefPath)&&xe(c.parentRefPath)||null,[c==null?void 0:c.parentRefPath]),g=zn(()=>{const w=b==null?void 0:b[0];if(!y||!w||!b)return oe({loading:!1});const S=ot(y),I=xe(w),E=I.findIndex(k=>typeof k=="object"&&"_key"in k);return Xn(oe({loading:!0}),r.unstable_observePathsDocumentPair(S,E===-1?I:I.slice(0,E)).pipe(Gn(750),se(k=>{let{draft:M,published:D}=k;var A;return{loading:!1,result:{availability:{draft:M.availability,published:D.availability},refValue:(A=Ka(M.snapshot||D.snapshot,b))==null?void 0:A._ref}}})))},[y,b],{loading:!0}),P=i.useCallback(()=>{var w;g.loading||(w=g.result)!=null&&w.refValue&&p({id:g.result.refValue,params:c})},[g.loading,g.result,p,c]);return!y||!b||_||g.loading||!((o=g.result)!=null&&o.availability.draft.available)&&!((s=g.result)!=null&&s.availability.published.available)||((a=g.result)==null?void 0:a.refValue)===f?null:n(lr,{shadow:1,tone:"caution","data-testid":"reference-changed-banner",children:n(Ie,{paddingX:4,paddingY:2,sizing:"border",width:1,children:x(z,{align:"center",children:[n(R,{size:1,children:n(ft,{})}),(l=g.result)!=null&&l.refValue?x(W,{children:[n(T,{flex:1,marginLeft:3,children:n(Tn,{title:"This reference has changed since you opened it.",size:1,children:"This reference has changed since you opened it."})}),n(T,{marginLeft:3,children:n(G,{onClick:P,icon:Wn,fontSize:1,mode:"ghost",padding:2,space:2,text:"Reload reference"})})]}):x(W,{children:[n(T,{flex:1,marginLeft:3,children:n(Tn,{title:"This reference has been removed since you opened it.",size:1,children:"This reference has been removed since you opened it."})}),n(T,{marginLeft:3,children:n(G,{as:h,icon:_e,fontSize:1,mode:"ghost",padding:2,space:2,text:"Close reference"})})]})]})})})});po.displayName="ReferenceChangedBanner";const dr=N(q)(mn||(mn=j([`
  position: relative;
  z-index: 50;
`])));function ur(t){let{granted:e,requiredPermission:o}=t;var s,a;const l=gs(),r=((s=l==null?void 0:l.roles)==null?void 0:s.length)!==1,c=pr(((a=l==null?void 0:l.roles)==null?void 0:a.map(d=>n("code",{children:d.title},d.name)))||[],", ");return e?null:n(dr,{"data-testid":"permission-check-banner",shadow:1,tone:"transparent",children:n(Ie,{paddingX:4,paddingY:3,sizing:"border",width:1,children:x(z,{align:"flex-start",children:[n(R,{size:1,children:n(bs,{})}),n(T,{flex:1,marginLeft:3,children:x(R,{size:1,children:["Your role",r&&"s"," ",c," ",r?"do":"does"," not have permissions to"," ",o," this document."]})})]})})})}function pr(t,e){return t.reduce((o,s)=>o===null?[s]:o.concat([e,s]),null)}function hr(t){const e=i.useRef();return i.useEffect(()=>{e.current=t},[t]),e.current}const mr=1e3*60*60*24*24;function fr(t){const e=Oe(),o=hr(t.enabled);i.useEffect(()=>{!o&&t.enabled&&e.push({...t,duration:mr}),o&&!t.enabled&&e.push({...t,duration:.01})},[t,e,o])}const gr=t=>t.preventDefault();function br(t){var e;const{hidden:o,margins:s}=t,{collapsedFieldSets:a,collapsedPaths:l,displayed:r,editState:c,documentId:d,documentType:u,onChange:p,validation:h,ready:f,formState:m,onFocus:v,onBlur:y,onSetCollapsedPath:_,onPathOpen:b,onSetCollapsedFieldSet:g,onSetActiveFieldGroup:P}=V(),C=Qn(),w=vs(d),S=i.useMemo(()=>ys(),[]),I=(e=c==null?void 0:c.transactionSyncLock)==null?void 0:e.enabled;fr({id:"sync-lock-".concat(d),status:"warning",enabled:I,title:"Syncing documentâ€¦",description:"Please hold tight while the document is synced. This usually happens right after the document has been published, and it shouldn't take more than a few seconds"}),i.useEffect(()=>{const M=C.pair.documentEvents(d,u).pipe(Ps(D=>{D.type==="mutation"&&S.publish(vr(D)),D.type==="rebase"&&S.publish(yr(D))})).subscribe();return()=>{M.unsubscribe()}},[d,C,u,S]);const E=!!(r!=null&&r._rev);i.useEffect(()=>{E&&S.publish({type:"mutation",patches:[],snapshot:r})},[E]);const k=i.useRef(null);return i.useEffect(()=>{Ss(k.current)},[]),n(Ie,{hidden:o,paddingX:4,paddingTop:5,paddingBottom:9,sizing:"border",width:1,children:n(xs,{margins:s,children:n(T,{as:"form",onSubmit:gr,ref:k,children:f?m===null?n(T,{padding:2,children:n(R,{children:"This form is hidden"})}):n(_s,{__internal_patchChannel:S,collapsedFieldSets:a,collapsedPaths:l,focusPath:m.focusPath,changed:m.changed,focused:m.focused,groups:m.groups,id:"root",members:m.members,onChange:p,onFieldGroupSelect:P,onPathBlur:y,onPathFocus:v,onPathOpen:b,onSetFieldSetCollapsed:g,onSetPathCollapsed:_,presence:w,readOnly:m.readOnly,schemaType:m.schemaType,validation:h,value:m.value}):n(xt,{ms:300,children:x(z,{align:"center",direction:"column",height:"fill",justify:"center",children:[n(ve,{muted:!0}),n(T,{marginTop:3,children:n(R,{align:"center",muted:!0,size:1,children:"Loading document"})})]})})})})})}function vr(t){const e=t.mutations.map(o=>o.patch).filter(Boolean);return{type:"mutation",snapshot:t.document,patches:rt(t.origin,e)}}function yr(t){const e=t.remoteMutations.map(s=>s.patch).filter(Boolean),o=t.localMutations.map(s=>s.patch).filter(Boolean);return{type:"rebase",snapshot:t.document,patches:rt("remote",e).concat(rt("local",o))}}function Pr(){const{activeViewId:t,paneKey:e,views:o}=V(),s="".concat(e,"tabpanel");return n(Yn,{space:1,children:o.map((a,l)=>{var r;return n(Sr,{icon:a.icon,id:"".concat(e,"tab-").concat(a.id),isActive:t===a.id,label:n(W,{children:a.title}),tabPanelId:s,viewId:l===0?null:(r=a.id)!=null?r:null},a.id)})})}function Sr(t){const{icon:e,id:o,isActive:s,label:a,tabPanelId:l,viewId:r}=t,{ready:c}=V(),{setView:d}=Ce(),u=i.useCallback(()=>d(r),[d,r]);return n(st,{"aria-controls":l,disabled:!c,fontSize:1,icon:e,id:o,selected:s,label:a,onClick:u})}const tt={error:{tone:"critical",icon:ws},warning:{tone:"caution",icon:ft},info:{tone:"primary",icon:Cs}};function xr(t){const{boundaryElement:e,isOpen:o,setOpen:s}=t,{onFocus:a,onPathOpen:l,schemaType:r,validation:c}=V(),d=i.useId(),u=c.length>0,p=c.some($a),h=c.some(Xa),f=c.some(Ya),m=i.useMemo(()=>{if(p)return tt.error;if(h)return tt.warning;if(f)return tt.info},[p,f,h]),v=i.useCallback(_=>{l(_),a(_)},[a,l]),y=i.useCallback(()=>s(!1),[s]);return u?n(qn,{id:d||"",button:n(G,{...m,title:"Show validation issues",mode:"bleed","data-testid":"validation-list-button"}),menu:n(ht,{open:o,children:n(qa,{documentType:r,validation:c,onClose:y,onFocus:v})}),popover:{portal:!0,boundaryElement:e,constrainSize:!0,preventOverflow:!0,width:0},placement:"bottom"}):null}function _r(){const{connectionState:t,schemaType:e,title:o,value:s}=V(),a=!!s&&t==="connected",{error:l,value:r}=Ja({enabled:a,schemaType:e,value:s});return t!=="connected"?n(W,{}):o?n(W,{children:o}):s?l?x(W,{children:["Error: ",l.message]}):n(W,{children:(r==null?void 0:r.title)||n("span",{style:{color:"var(--card-muted-fg-color)"},children:"Untitled"})}):x(W,{children:["New ",(e==null?void 0:e.title)||(e==null?void 0:e.name)]})}const wr=t=>!!t.showAsAction,Cr=ma(wr),ho=i.memo(i.forwardRef((t,e)=>{let{rootElement:o}=t;const{onMenuAction:s,onPaneClose:a,onPaneSplit:l,historyController:r,validation:c,menuItems:d,menuItemGroups:u,schemaType:p,ready:h,views:f,unstable_languageFilter:m}=V(),{revTime:v}=r,{features:y}=re(),{index:_,BackLink:b,hasGroupSiblings:g}=Ce(),P=i.useMemo(()=>d.filter(Cr),[d]),[C,w]=fe.useState(!1),S=f.length>1,I=y.reviewChanges,E=y.splitViews&&l&&f.length>1,k=E&&g,M=!k&&!y.backButton;return n(Ae,{ref:e,loading:!h,title:n(_r,{}),tabs:S&&n(Pr,{}),backButton:y.backButton&&_>0&&n(G,{as:b,"data-as":"a",icon:fa,mode:"bleed"}),subActions:I&&n(co,{chunk:v,mode:"rev",placement:"bottom-end"}),actions:x(Vn,{space:1,children:[m.length>0&&n(W,{children:m.map((D,A)=>i.createElement(D,{key:"language-filter-".concat(A),schemaType:p}))}),c.length>0&&n(xr,{boundaryElement:o,isOpen:C,setOpen:w},"validation-menu"),n(ga,{itemGroups:u,items:P,onAction:s},"context-menu"),E&&n(G,{icon:ba,mode:"bleed",onClick:l,title:"Split pane right"},"split-pane-button"),k&&n(G,{icon:_e,mode:"bleed",onClick:a,title:"Close split pane"},"close-view-button"),M&&n(G,{icon:_e,mode:"bleed",title:"Close pane group",as:b},"close-view-button")]})})}));ho.displayName="DocumentPanelHeader";const Ir=N(Nn)(t=>{let{$disabled:e}=t;return e?{height:"100%"}:te(fn||(fn=j([`
    height: 100%;
    overflow: auto;
    position: relative;
    scroll-behavior: smooth;
    outline: none;
  `])))}),Er=function(e){const{footerHeight:o,isInspectOpen:s,rootElement:a,setDocumentPanelPortalElement:l}=e,{activeViewId:r,displayed:c,documentId:d,editState:u,value:p,views:h,ready:f,schemaType:m,permissions:v,isPermissionsLoading:y}=V(),{collapsed:_}=Hn(),b=Za(),{features:g}=re(),[P,C]=i.useState(null),w=je(P),S=i.useRef(null),[I,E]=i.useState(null),k=p._createdAt?"update":"create",M=i.useMemo(()=>h.find(ae=>ae.id===r)||h[0]||{type:"form"},[r,h]),D=g.splitPanes&&S.current||b.element,A=i.useMemo(()=>_?[(w==null?void 0:w.height)||0,0,o?o+2:2,0]:[0,0,2,0],[_,o,w]),L=M.type!=="form",B=i.useMemo(()=>M.type==="component"&&M.component&&i.createElement(M.component,{document:{draft:(u==null?void 0:u.draft)||null,displayed:c||p,historical:c,published:(u==null?void 0:u.published)||null},documentId:d,options:M.options,schemaType:m}),[M,c,d,u==null?void 0:u.draft,u==null?void 0:u.published,m,p]);i.useEffect(()=>{I!=null&&I.scrollTo&&I.scrollTo(0,0)},[d,I]),i.useEffect(()=>{D&&l(D)},[D,l]);const K=i.useMemo(()=>s?n(cr,{value:c||p}):null,[s,c,p]);return x(z,{direction:"column",flex:2,overflow:_?void 0:"hidden",children:[n(ho,{rootElement:a,ref:C}),n(we,{children:n(gt,{element:D,__unstable_elements:{documentScrollElement:I},children:x(bt,{element:I,children:[M.type==="form"&&!y&&f&&x(W,{children:[n(ur,{granted:!!(v!=null&&v.granted),requiredPermission:k}),n(po,{})]}),x(Ir,{$disabled:_||!1,"data-testid":"document-panel-scroller",ref:E,children:[n(br,{hidden:L,margins:A},d+(f?"_ready":"_pending")),B]}),K,n("div",{"data-testid":"document-panel-portal",ref:S})]})})})]})},mo=["left","bottom"],Tr={small:0,medium:1,large:2,full:"auto"};function kr(t){const{dialog:e,referenceElement:o}=t;return n(mt,{content:n(Rr,{dialog:e}),fallbackPlacements:mo,open:!0,placement:"top",portal:!0,preventOverflow:!0,referenceElement:o})}function Rr(t){const{dialog:e}=t,{cancelButtonIcon:o,cancelButtonText:s,confirmButtonIcon:a,confirmButtonText:l,message:r,onCancel:c,onConfirm:d,tone:u}=e,{isTopLayer:p}=no(),[h,f]=i.useState(null),m=i.useCallback(()=>{p&&c()},[p,c]),v=i.useCallback(y=>{y.key==="Escape"&&p&&c()},[p,c]);return vt(m,[h]),yt(v),x(z,{direction:"column",ref:f,style:{minWidth:320-16,maxWidth:400},children:[n(T,{flex:1,overflow:"auto",padding:4,children:n(R,{children:r})}),n(T,{paddingX:4,paddingY:3,style:{borderTop:"1px solid var(--card-border-color)"},children:x(Ls,{columns:2,gap:2,children:[n(G,{icon:o,onClick:c,mode:"ghost",text:s||"Cancel"}),n(G,{icon:a,onClick:d,text:l||"Confirm",tone:u})]})})]})}function Mr(t){const{dialog:e}=t,o=i.useId(),s=e.footer&&n(T,{paddingX:4,paddingY:3,children:e.footer});return n(Pt,{zOffset:"fullscreen",children:n(St,{__unstable_hideCloseButton:e.showCloseButton===!1,footer:s,header:e.header,id:o,onClose:e.onClose,onClickOutside:e.onClose,width:e.width===void 0?1:Tr[e.width],portal:"documentPanelPortalElement",children:n(T,{padding:4,children:e.content})})})}function Dr(t){const{dialog:e,referenceElement:o}=t;return n(mt,{content:n(Or,{dialog:e}),fallbackPlacements:mo,open:!0,placement:"top",portal:!0,preventOverflow:!0,referenceElement:o})}function Or(t){const{dialog:e}=t,{content:o,onClose:s}=e,{isTopLayer:a}=no(),[l,r]=i.useState(null),c=i.useCallback(()=>{a&&s()},[a,s]),d=i.useCallback(u=>{u.key==="Escape"&&a&&s()},[a,s]);return vt(c,[l]),yt(d),n("div",{ref:r,children:o})}function wt(t){const{dialog:e,referenceElement:o=null}=t,s=i.useId();if(e.type==="confirm")return n(kr,{dialog:e,referenceElement:o});if(e.type==="popover")return n(Dr,{dialog:e,referenceElement:o});if(e.type==="dialog"||!e.type)return n(Mr,{dialog:e});const a=e;return console.warn("Unsupported modal type ".concat(a.type)),n(St,{id:s,onClose:a.onClose,onClickOutside:a.onClose,width:2,children:n(T,{padding:4,children:a.content||x(W,{children:["Unexpected modal type (",n("code",{children:a.type}),")"]})})})}function Lr(t){const{actionStates:e,disabled:o}=t,s=i.useId(),a=i.useRef(null),[l,r]=i.useState(-1),[c,d]=i.useState(null),u=i.useCallback(f=>{r(f)},[]),p=i.useMemo(()=>({placement:"top-end",portal:!0,preventOverflow:!0}),[]),h=e[l];return x(W,{children:[n(qn,{id:"".concat(s,"-action-menu"),button:n(G,{"data-testid":"action-menu-button","aria-label":"Open document actions",disabled:o,icon:Is,mode:"ghost",ref:a}),menu:n(ht,{padding:1,children:e.map((f,m)=>n(Ar,{actionState:f,disabled:o,index:m,onAction:u},m))}),popover:p,ref:d}),h&&h.dialog&&n(Pt,{zOffset:"paneFooter",children:n(wt,{dialog:h.dialog,referenceElement:c})})]})}function Ar(t){const{actionState:e,disabled:o,index:s,onAction:a}=t,{onHandle:l}=e,r=i.useCallback(()=>{a(s),l&&l()},[s,a,l]),c=e.title&&n(T,{padding:2,children:n(R,{size:1,children:e.title})});return n(Bn,{"data-testid":"action-".concat(e.label.replace(" ","")),disabled:o||!!e.disabled,onClick:r,padding:0,tone:e.tone,children:n(be,{content:c,disabled:!c,fallbackPlacements:["left","bottom"],placement:"top",portal:!0,children:x(z,{align:"center",paddingX:3,children:[x(z,{flex:1,paddingY:3,children:[e.icon&&n(T,{marginRight:3,children:x(R,{children:[i.isValidElement(e.icon)&&e.icon,Es.isValidElementType(e.icon)&&i.createElement(e.icon)]})}),n(R,{children:e.label})]}),e.shortcut&&n(T,{marginLeft:3,children:n(Jn,{keys:String(e.shortcut).split("+").map(d=>d.slice(0,1).toUpperCase()+d.slice(1))})})]})})})}function fo(t){const{disabled:e,showMenu:o,states:s}=t,[a,...l]=s,[r,c]=i.useState(null),d=i.useMemo(()=>!a||!a.title&&!a.shortcut?null:x(z,{padding:2,style:{maxWidth:300},align:"center",children:[n(R,{size:1,children:a.title}),a.shortcut&&n(T,{marginLeft:a.title?2:0,children:n(Jn,{keys:String(a.shortcut).split("+").map(u=>u.slice(0,1).toUpperCase()+u.slice(1).toLowerCase())})})]}),[a]);return x(z,{children:[a&&n(Qa,{zOffset:200,children:n(be,{disabled:!d,content:d,portal:!0,placement:"top",children:n(X,{flex:1,children:n(G,{"data-testid":"action-".concat(a.label),disabled:e||!!a.disabled,icon:a.icon,onClick:a.onHandle,ref:c,text:a.label,tone:a.tone||"primary"})})})}),o&&l.length>0&&n(T,{marginLeft:1,children:n(Lr,{actionStates:l,disabled:e})}),a&&a.dialog&&n(wt,{dialog:a.dialog,referenceElement:r})]})}const jr=i.memo(function(){const{actions:e,connectionState:o,documentId:s,editState:a}=V();return!e||!a?null:n(_t,{actions:e,actionProps:a,children:l=>{let{states:r}=l;return n(fo,{disabled:o!=="connected",showMenu:e.length>1,states:r},s)}})}),zr=i.memo(function(){var e;const{connectionState:o,editState:s,historyController:a}=V(),l=((e=a.revTime)==null?void 0:e.id)||"",r=((s==null?void 0:s.draft)||(s==null?void 0:s.published)||{})._rev===l,c=i.useMemo(()=>({...s||{},revision:l}),[s,l]),d=i.useMemo(()=>[va],[]);return n(_t,{actions:d,actionProps:c,children:u=>{let{states:p}=u;return n(fo,{disabled:o!=="connected"||!!r,showMenu:!1,states:p})}})}),Br={primary:"primary",success:"positive",warning:"caution",danger:"critical"};function Nr(t){let{states:e}=t;return n(Vn,{space:1,children:e.map((o,s)=>n(be,{content:o.title&&n(T,{padding:2,children:n(R,{size:1,children:o.title})}),disabled:!o.title,placement:"top",portal:!0,children:n(Ts,{fontSize:1,mode:"outline",paddingX:2,paddingY:1,radius:4,tone:o.color?Br[o.color]:void 0,style:{whiteSpace:"nowrap"},children:o.label})},String(s)))})}function Wr(){const{badges:t,editState:e}=V();return!e||!t?null:n(Gs,{badges:t,badgeProps:e,children:o=>{let{states:s}=o;return n(Nr,{states:s})}})}const Vr=N(z)(gn||(gn=j([`
  cursor: default;
`])));function Fr(t){const{collapsed:e,disabled:o,lastPublished:s,lastUpdated:a,liveEdit:l}=t,r=ne(s||"",{minimal:!0,agoSuffix:!0}),c=ne(s||"",{minimal:!0}),d=ne(a||"",{minimal:!0,agoSuffix:!0}),u=ne(a||"",{minimal:!0});return n(Vr,{align:"center","data-ui":"SessionLayout",sizing:"border",children:n(be,{placement:"top",portal:!0,content:n(X,{padding:3,space:3,children:n(R,{size:1,muted:!0,children:l?x(W,{children:["Last updated ",a?d:r]}):x(W,{children:["Last published ",r]})})}),children:n(G,{mode:"bleed",tone:l?"critical":"positive",tabIndex:-1,disabled:o,children:x(z,{align:"center",children:[n(T,{marginRight:e?0:3,children:n(R,{size:2,children:l?n(es,{}):n(Zn,{})})}),!e&&n(R,{size:1,weight:"medium",children:l?n(W,{children:a?u:c}):c})]})})})})}const Hr=N(Ee.path)(bn||(bn=j([`
  transform-origin: center;
`]))),Ur=t=>n(Ee.circle,{fill:"none",r:"8",cx:"12.5",cy:"12.5",strokeWidth:"1.2",...t}),Gr=t=>n(Hr,{fill:"none",d:"M14 17.5619L11.5 20.5L14.5 23.0619M11 7.43811L13.5 4.50001L10.5 1.93811",...t}),Kr=t=>n(Ee.path,{d:"M9.5 12.1316L11.7414 14.5L16 10",...t}),$r=t=>n(Ee.path,{d:"M15 7L18 10M6 19L7 15L17 5L20 8L10 18L6 19Z",...t}),Xr=ya(vn||(vn=j([`
  0% {
    transform: rotate(0);
  }
  100% {
    transform: rotate(360deg);
  }
`]))),Yr=N.g(yn||(yn=j([`
  transform-origin: center;

  &[data-rotate] {
    animation: `,` 1s ease-in-out infinite;
  }
`])),Xr),qr={syncing:{scale:1,transition:{duration:0}},saved:{scale:[1,.8,1.2,.9,1.1,.95,1.05,.99,1],transition:{duration:.5,delay:.2}},changes:{transition:{duration:0}}},Jr={syncing:{strokeDasharray:"0, 0, 23, 3, 23, 3",strokeDashoffset:10,opacity:1,transition:{duration:0}},saved:{strokeDasharray:"0, 0, 23, 0, 23, 0",strokeDashoffset:10,opacity:1,transition:{duration:.2}},changes:{strokeDasharray:"0, 60, 23, 0, 23, 0",strokeDashoffset:0,opacity:0,transition:{duration:.5}}},Zr={syncing:{opacity:1,transition:{duration:0}},saved:{opacity:0,transition:{duration:.2}},changes:{opacity:0}},Qr={syncing:{pathLength:0,transition:{duration:0}},saved:{pathLength:1,transition:{delay:.4,duration:.3}},changes:{pathLength:0,transition:{duration:.2}}},ec={syncing:{pathLength:0,transition:{duration:0}},saved:{pathLength:0,transition:{duration:0}},changes:{pathLength:1,transition:{duration:.4,delay:.5}}};function tc(t){const{status:e}=t;return e?n("svg",{width:"1em",height:"1em",viewBox:"0 0 25 25",fill:"none",stroke:"currentColor",strokeWidth:"1.2","data-sanity-icon":"",children:x(Ee.g,{variants:qr,initial:e,animate:e,children:[x(Yr,{"data-rotate":e==="changes"?void 0:"",children:[n(Gr,{variants:Zr,initial:e,animate:e}),n(Ur,{variants:Jr,initial:e,animate:e})]}),n(Kr,{variants:Qr,initial:e,animate:e}),n($r,{variants:ec,initial:e,animate:e})]})}):null}const nc=fe.forwardRef(function(e,o){const{collapsed:s,status:a,lastUpdated:l,...r}=e,c=ne(l||"",{minimal:!0}),d=ne(l||"",{minimal:!0,agoSuffix:!0}),u=i.useMemo(()=>a==="syncing"?{text:"Saving...",tone:void 0}:a==="changes"?{text:c,tone:"caution"}:a==="saved"?{text:"Saved!",tone:"positive"}:{},[a,c]);return a?n(be,{placement:"top",portal:!0,disabled:a!=="changes",content:x(X,{padding:3,space:3,children:[n(R,{size:1,weight:"semibold",children:"Review changes"}),x(R,{size:1,muted:!0,children:["Changes saved ",d]})]}),children:n(G,{mode:"bleed",justify:"flex-start",tone:u==null?void 0:u.tone,...r,"data-testid":"review-changes-button",ref:o,children:x(z,{align:"center",children:[n(T,{marginRight:s?0:3,children:n(R,{children:n(tc,{status:a})})}),!s&&n(R,{size:1,weight:"medium",children:u==null?void 0:u.text})]})})}):null}),oc=fe.memo(nc),ac=1e3,sc=3e3,ic=i.memo(function(){var e;const{changesOpen:o,documentId:s,documentType:a,editState:l,onHistoryClose:r,onHistoryOpen:c,historyController:d,value:u}=V(),p=Pa(s,a),h=u==null?void 0:u._updatedAt,f=(e=l==null?void 0:l.published)==null?void 0:e._updatedAt,m=d.onOlderRevision(),v=!!(l!=null&&l.liveEdit),y=!!(l!=null&&l.published),_=!!(l!=null&&l.draft),[b,g]=i.useState(null),P=je(b),C=!P||(P==null?void 0:P.width)<300,[w,S]=i.useState(null);i.useEffect(()=>{if(w==="syncing"&&!p.isSyncing){const k=setTimeout(()=>S("saved"),ac);return()=>clearTimeout(k)}if(w==="saved"){const k=setTimeout(()=>S(null),sc);return()=>clearTimeout(k)}},[w,h,p.isSyncing]),i.useLayoutEffect(()=>{S(null)},[s]),i.useLayoutEffect(()=>{p.isSyncing&&S("syncing")},[p.isSyncing,h]);const I=i.useMemo(()=>n(oc,{lastUpdated:h,status:w||(_?"changes":void 0),onClick:o?r:c,disabled:m,selected:o,collapsed:C}),[_,o,r,c,h,m,w,C]),E=i.useMemo(()=>(v||y)&&n(T,{marginRight:1,children:n(Fr,{disabled:m,lastPublished:f,lastUpdated:h,liveEdit:v,collapsed:C})}),[C,f,h,v,y,m]);return x(z,{align:"center","data-ui":"DocumentSparkline",ref:g,children:[E,x(z,{align:"center",flex:1,children:[I,!C&&n(T,{marginLeft:3,children:n(Wr,{})})]})]})}),rc=N(T)(Pn||(Pn=j([`
  min-width: 10em;
  max-width: 16em;
`])));function cc(t){const{actionsBoxRef:e}=t,{badges:o,historyController:s}=V(),a=s.onOlderRevision();return i.useMemo(()=>n(T,{paddingLeft:2,paddingRight:[2,3],paddingY:2,children:x(z,{align:"center",children:[n(T,{flex:[1,2],children:o&&n(ic,{})}),n(rc,{flex:1,marginLeft:[1,3],ref:e,children:a?n(zr,{}):n(jr,{})})]})}),[e,o,a])}function lc(t){const{actionsBoxElement:e,activeIndex:o,children:s,id:a,onActionStart:l,onKeyDown:r,rootRef:c,states:d,...u}=t,p=d[o],h=i.useCallback(f=>{const m=d.filter(y=>y.shortcut&&pt(y.shortcut,f)),v=m[0];if(m.length>1&&console.warn('Keyboard shortcut conflict: More than one document action matches the shortcut "'.concat(v.shortcut,'"')),v&&!v.disabled&&v.onHandle){f.preventDefault(),v.onHandle(),l(d.indexOf(v));return}r&&r(f)},[l,r,d]);return x(De,{id:a,onKeyDown:h,tabIndex:-1,...u,ref:c,children:[s,p&&p.dialog&&n(Pt,{zOffset:"paneFooter",children:n(wt,{dialog:p.dialog,referenceElement:e})})]})}const go=fe.memo(t=>{const{actionsBoxElement:e,children:o,...s}=t,{actions:a,editState:l}=V(),[r,c]=i.useState(-1),d=i.useCallback(p=>{c(p)},[]),u=i.useMemo(()=>l&&{...l,onComplete:()=>{},revision:void 0},[l]);return!u||!a?null:n(_t,{actionProps:u,actions:a,children:p=>{let{states:h}=p;return n(lc,{...s,activeIndex:r,actionsBoxElement:e,onActionStart:d,states:h,children:o})}})});go.displayName="DocumentActionShortcuts";const kn=320,Rn=600,Mn=320,Dn=["fixed","absolute"],dc=N(Sa)(Sn||(Sn=j([`
  flex: 1;
  display: flex;
  min-height: 0;
  min-width: 0;
`]))),_c=i.memo(function(e){const{name:o}=Le();return n(Fn,{name:e.pane.source||o,children:n(uc,{...e})})});function uc(t){var e;const{pane:o,paneKey:s}=t,{resolveNewDocumentOptions:a}=Le().document,l=Ce(),r=pc(o.options,l.params),{documentType:c,isLoaded:d}=xa(r.id,r.type),u=i.useMemo(()=>a({type:"global"}),[a]),[p,h]=_a({templateItems:u}),f=d&&!h,m=i.useMemo(()=>f&&c&&r.type!==c?hc(t,r,c):t,[t,c,f,r]),{ReferenceChildLink:v,handleEditReference:y,groupIndex:_,routerPanesState:b}=l,g=((e=b[_+1])==null?void 0:e[0].params)||{},P=b.length,{parentRefPath:C}=g,w=i.useMemo(()=>C?{path:xe(C),state:_>=P-1?"none":_>=P-2?"selected":"pressed"}:{path:[],state:"none"},[C,_,P]);return r.type==="*"&&!f?n(We,{flex:2.5,minWidth:320,paneKey:s,title:"Loading documentâ€¦"}):c?n(ro,{...m,children:n(wa,{EditReferenceLinkComponent:v,onEditReference:y,initialValueTemplateItems:p,activePath:w,children:n(mc,{})})},c):n(io,{flex:2.5,minWidth:320,paneKey:s,title:n(W,{children:"The document was not found"}),children:n(X,{space:4,children:x(R,{as:"p",children:["The document type is not defined, and a document with the ",n("code",{children:r.id})," ","identifier could not be found."]})})})}function pc(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const o=An();return i.useMemo(()=>{if(t.type&&t.type!=="*")return t;const s=t.template||e.template,a=s?o.find(r=>r.id===s):void 0,l=a==null?void 0:a.schemaType;return l?{...t,type:l}:t},[t,e.template,o])}function hc(t,e,o){return{...t,pane:{...t.pane,options:{...e,type:o}}}}function mc(){const{changesOpen:t,documentType:e,onFocus:o,onPathOpen:s,onHistoryOpen:a,onKeyUp:l,inspectOpen:r,paneKey:c,schemaType:d,value:u}=V(),{features:p}=re(),{collapsed:h}=Hn(),f=Ca(),[m,v]=i.useState(null),[y,_]=i.useState(null),[b,g]=i.useState(null),[P,C]=i.useState(null),w=je(y),S=w==null?void 0:w.height,I=i.useMemo(()=>n(Er,{footerHeight:S||null,isInspectOpen:r,rootElement:m,setDocumentPanelPortalElement:C}),[S,m,r]),E=i.useMemo(()=>n(gt,{__unstable_elements:{documentPanelPortalElement:P},children:n(Ft,{position:Dn,zOffset:f.portal,children:n(Ia,{ref:_,children:n(cc,{actionsBoxRef:g})})})}),[P,f.portal]),k=i.useMemo(()=>!p.reviewChanges||!t?null:n(bt,{element:m,children:n(Qi,{})}),[t,p.reviewChanges,m]),M=i.useCallback(B=>{s(B),o(B)},[s,o]),D=i.useMemo(()=>d?x(W,{children:[n(Ft,{position:Dn,zOffset:f.portal,children:n(z,{direction:"column",flex:1,height:h?void 0:"fill",children:x(dc,{"data-testid":"change-connector-root",isReviewChangesOpen:t,onOpenReviewChanges:a,onSetFocus:M,children:[I,k]})})}),E,n(wi,{})]}):n(io,{flex:2.5,minWidth:320,paneKey:c,title:x(W,{children:["Unknown document type: ",n("code",{children:e})]}),tone:"caution",children:x(X,{space:4,children:[e&&x(R,{as:"p",children:["This document has the schema type ",n("code",{children:e}),", which is not defined as a type in the local content studio schema."]}),!e&&n(R,{as:"p",children:"This document does not exist, and no schema type was specified for it."}),jn]})}),[d,f.portal,h,t,a,M,I,k,E,c,e,u]),A=t?Rn+Mn:Rn,L=t?kn+Mn:kn;return n(go,{actionsBoxElement:b,currentMinWidth:A,"data-testid":"document-pane",flex:2.5,id:c,minWidth:L,onKeyUp:l,rootRef:v,children:D})}function fc(){return n(q,{height:"fill",children:n(z,{align:"center",height:"fill",justify:"center",padding:4,sizing:"border",children:n(Ie,{width:0,children:n(q,{padding:4,radius:2,shadow:1,tone:"caution",children:x(z,{children:[n(T,{children:n(R,{size:1,children:n(ft,{})})}),x(X,{flex:1,marginLeft:3,space:3,children:[n(R,{as:"h1",size:1,weight:"bold",children:"No document types"}),n(R,{as:"p",muted:!0,size:1,children:"Please define at least one document type in your schema."}),n(R,{as:"p",muted:!0,size:1,children:n("a",{href:"https://www.sanity.io/docs/create-a-schema-and-configure-sanity-studio",target:"_blank",rel:"noreferrer",children:"Learn how to add a document type â†’"})})]})]})})})})})}const gc=N(Zs)(xn||(xn=j([`
  min-height: 100%;
  min-width: 320px;
`]))),bc=pt("mod+s"),vc=i.memo(function(e){let{onPaneChange:o}=e;var s;const{push:a}=Oe(),l=Ln(),{layoutCollapsed:r,setLayoutCollapsed:c}=re(),{paneDataItems:d,resolvedPanes:u}=ci(),[p,h]=i.useState(null),f=i.useCallback(()=>c(!0),[c]),m=i.useCallback(()=>c(!1),[c]);return i.useEffect(()=>{u.length&&o(u)},[o,u]),i.useEffect(()=>{const y=_=>{bc(_)&&(_.preventDefault(),a({closable:!0,id:"auto-save-message",status:"info",title:"Your work is automatically saved!",duration:4e3}))};return window.addEventListener("keydown",y),()=>window.removeEventListener("keydown",y)},[a]),((s=l._original)==null?void 0:s.types.some(Ea))?x(gt,{element:p||null,children:[n(gc,{flex:1,height:r?void 0:"fill",minWidth:512,onCollapse:f,onExpand:m,children:d.map(y=>{let{active:_,childItemId:b,groupIndex:g,itemId:P,key:C,pane:w,index:S,params:I,path:E,payload:k,siblingIndex:M,selected:D}=y;return n(i.Fragment,{children:w===at?n(We,{paneKey:C,path:E,selected:D}):n(Pi,{active:_,groupIndex:g,index:S,pane:w,childItemId:b,itemId:P,paneKey:C,params:I,payload:k,selected:D,siblingIndex:M})},"".concat(w===at?"loading":w.type,"-").concat(S))})}),n("div",{"data-portal":"",ref:h})]}):n(fc,{})}),yc={};function Pc(t){let{tool:{options:e}}=t;const{unstable_sources:o}=ts(),[s]=o,{source:a,defaultDocumentNode:l,structure:r}=e||{},{state:c}=ze(),d=i.useMemo(()=>{const h=typeof c.intent=="string"?c.intent:void 0,f=ie(c.params)?c.params:yc,m=c.payload;return h?{intent:h,params:f,payload:m}:void 0},[c]);i.useEffect(()=>(Ze([]),()=>Ze([])),[]);const[{error:u},p]=i.useState({error:null});return u?n(mi,{error:u}):n(ns,{onCatch:p,children:n(Fn,{name:a||s.name,children:n(os,{defaultDocumentNode:l,structure:r,children:d?n(ui,{...d}):n(vc,{onPaneChange:Ze})})})})}var wc=Object.freeze({__proto__:null,default:Pc});export{xt as Delay,_c as DocumentPane,ro as DocumentPaneProvider,wc as index,re as useDeskTool,tr as useDeskToolSetting};
